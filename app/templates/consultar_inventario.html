{% extends "base.html" %}
{% block title %}Consultar Inventario{% endblock %}
{% block content %}
<div class="table-container">
    <h1>Inventario de Insumos</h1>
    <form method="get" action="{{ url_for('consultar_inventario') }}">
        <input type="text" name="filtro" class="filtro-input-table" placeholder="Buscar insumo..." value="{{ filtro }}">
        <button type="submit" class="btn-filtrar filtro-btn">Filtrar</button>
    </form>
    <div class="table-scroll">
        <table>
            <thead>
                <tr>
                    <th>Código</th>
                    <th>Descripción</th>
                    <th>Existencias Iniciales</th>
                    <th>Entradas</th>
                    <th>Salidas</th>
                    <th>Porcentaje Utilizado</th>
                    <th>Stock Actual</th>
                </tr>
            </thead>
            <tbody>
            {% for insumo in insumos %}
                <tr>
                    <td>{{ insumo.codigo_insumo }}</td>
                    <td>{{ insumo.descripcion }}</td>
                    <td>{{ insumo.existencias_iniciales_anio}}</td>
                    <td>{{insumo.cantidad_entradas}}</td>
                    <td>{{insumo.cantidad_salidas}}</td>
                    <td>{{'%.0f' % insumo.porcentaje_utilizado}}%</td>
                    <td>{{ insumo.stock_actual }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<div class="action-buttons-footer" style="max-width: 400px; margin: 20px auto 0 auto;">
    <a class="btn-footer-outline" href="{{ url_for('index') }}">Volver al menú</a>
</div>
<a href="{{ url_for('exportar_inventario', filtro=filtro) }}" class="btn-export-fixed">Exportar a CSV</a>
{% endblock %}